<!--

    Copyright (C) 2011 Everit Kft. (http://www.everit.org)

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

            http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->
<!DOCTYPE html>
<html>

<head>
<title>Partial response</title>
<meta name="author" content="" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script data-eht-attr-src="resources['org/everit/web/partialresponse/js:partialresponse.js']"></script>
<script data-eht-attr-src="resources['JQuery/js:jquery_1_11_3.js']"></script>
<style type="text/css">
div.border {
  margin: 5px;
  padding: 5px;
  border: 1px solid #8AC007;
}

.background {
  background-color: #8AC007;
}
</style>
</head>

<body>
  <div id="full_content" data-eht-fragment="'full_content'" class="border">
    <span class="background">full_content</span>
    <div id="main_div" data-eht-fragment="'main_div'" class="border">
      <span class="background">main_div</span>
      <div id="sub_div_0" data-eht-fragment="'sub_div_0'" class="border">
        <span class="background">sub_div_0</span>
        <p id="sub_div_0_msg" data-eht-text="sub_div_0_msg">sub_div_0_msg</p>
      </div>
      <div id="sub_div_1" data-eht-fragment="'sub_div_1'" class="border">
        <span class="background">sub_div_1</span>
        <p id="sub_div_1_msg" data-eht-text="sub_div_1_msg">sub_div_1_msg</p>
        <table id="div_table_1" data-eht-fragment="'div_table_1'">
          <tbody>
            <tr>
              <td class="background">div_table_1</td>
              <td id="div_table_1_cell_msg" data-eht-text="div_table_1_cell_msg">cell_msg</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div id="sub_div_2" data-eht-fragment="'sub_div_2'" class="border">
        <span class="background">sub_div_2</span>
        <p id="sub_div_2_msg" data-eht-text="sub_div_2_msg">sub_div_2_msg</p>
        <table id="div_table_2" data-eht-fragment="'div_table_2'">
          <tbody>
            <tr>
              <td class="background">div_table_2</td>
              <td id="div_table_2_cell_msg" data-eht-text="div_table_2_cell_msg">cell_msg</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <p id="sample_msg" data-eht-text="sample_msg">sample_msg</p>
    <div id="new_content" data-eht-text="new_content">new_content</div>
  </div>

  <div id=test_buttons>
    <table border="1">
      <thead>
        <tr>
          <th>Action</th>
          <th>Remark</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><a id="resetToDefault" href="javascript:void(0);" onclick="resetToDefault();">Reset
              to default</a></td>
          <td>Reset to default values (partial response with full_content)</td>
        </tr>
        <tr>
          <td><a id="replace_by_id" href="javascript:void(0);" onclick="replaceByIdTest();">ReplaceById
              Test</a></td>
          <td><pre>
Partial response test with only use partial-replace (replaceById). Change order:
1. Change new_content div text ("default_new_content" to "replace_by_id_new_content_with_hard_code_html").
2. Change main_div text (sub_div_0, sub_div_1 and sub_div_2; prefix ("default") is replaced to "replace_by_id").
3. Change div_table_2 text (prefix replaced to "update_DIV_TABLE_2").
4. Change div_table_1 text (prefix replaced to "update_DIV_TABLE_1").
5. Change sub_div_0 text (prefix replaced to "update_SUB_DIV_0").
6. Change sub_div_1 text (prefix replaced to "update_SUB_DIV_1").
</pre></td>
        </tr>
        <tr>
          <td><a id="replace" href="javascript:void(0);" onclick="replaceTest();">Replace
              Test</a></td>
          <td><pre>
Partial response test with only use partial-replace (replace with use selector). Change order:
1. Change new_content div text ("default_new_content" to "replace_new_content_with_hard_code_html").
2. Change main_div text (sub_div_0, sub_div_1 and sub_div_2; prefix ("default") is replaced to "replace_").
3. Change div_table_2 text (prefix replaced to "update_DIV_TABLE_2").
4. Change div_table_1 text (prefix replaced to "update_DIV_TABLE_1").
5. Change sub_div_0 text (prefix replaced to "update_SUB_DIV_0").
6. Change sub_div_1 text (prefix replaced to "update_SUB_DIV_1").
</pre></td>
        </tr>
        <tr>
          <td><a id="append" href="javascript:void(0);" onclick="appendTest();">Append Test</a></td>
          <td><pre>
Partial response test with only use Prepend-append (append with use selector). Change order:
1. Append "_append" postfix to "default_new_content".
2. Append new div elements to main_div. Append "append_new_content" div with text content ("append_new_content")
   and empty "after_append" with empty text content.
3. Append "after_append" text to the "after_append" div.
</pre></td>
        </tr>
        <tr>
          <td><a id="prepend" href="javascript:void(0);" onclick="prependTest();">Prepend
              Test</a></td>
          <td><pre>
Partial response test with use partial-append, partial-prepend, partial-replace normal and selectors. Change order:
1. Change main_div text (sub_div_0, sub_div_1 and sub_div_2; prefix ("default") is replaced to "replace_by_id").
2. Append "_append" postfix to "default_new_content".
3. Prepend "prepend_" prefix to "default_new_content_append".
</pre></td>
        </tr>
        <tr>
          <td><a id="complex" href="javascript:void(0);" onclick="complexTest();">Complex
              Test</a></td>
          <td><pre>
Partial response test with only use partial-append (prepend with use selector). Change order:
1. Prepend "prepend_" prefix to "default_new_content".
2. Prepend new div elements to main_div. Prepend "prepend_new_content" div with text content ("prepend_new_content")
   and empty "after_prepend" with empty text content.
3. Prepend "after_prepend" text to the "after_prepend" div.
4. Change sub_div_1 text (prefix replaced to "update_SUB_DIV_1").
</pre></td>
        </tr>
      </tbody>
    </table>
  </div>
  <script type="text/javascript">
      function resetToDefault() {
        $.ajax({
          data : {
            action : "reset_to_default"
          },
          headers : {
            "x-partialresponse-ajax" : "true"
          }
        }).done(function(msg) {
          epr_process_ajax_response(msg);
        });
        return true;
      }

      function replaceByIdTest() {
        $.ajax({
          data : {
            action : "replace_by_id"
          },
          headers : {
            "x-partialresponse-ajax" : "true"
          }
        }).done(function(msg) {
          epr_process_ajax_response(msg);
        });
        return true;
      }

      function replaceTest() {
        $.ajax({
          data : {
            action : "replace"
          },
          headers : {
            "x-partialresponse-ajax" : "true"
          }
        }).done(function(msg) {
          epr_process_ajax_response(msg);
        });
        return true;
      }

      function appendTest() {
        $.ajax({
          data : {
            action : "append"
          },
          headers : {
            "x-partialresponse-ajax" : "true"
          }
        }).done(function(msg) {
          epr_process_ajax_response(msg);
        });
        return true;
      }

      function prependTest() {
        $.ajax({
          data : {
            action : "prepend"
          },
          headers : {
            "x-partialresponse-ajax" : "true"
          }
        }).done(function(msg) {
          epr_process_ajax_response(msg);
        });
        return true;
      }

      function complexTest() {
        $.ajax({
          data : {
            action : "complex"
          },
          headers : {
            "x-partialresponse-ajax" : "true"
          }
        }).done(function(msg) {
          epr_process_ajax_response(msg);
        });
        return true;
      }
    </script>
</body>

</html>
